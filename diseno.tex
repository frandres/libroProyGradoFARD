\chapter{Diseño} \label{chap:diseno}

La Extracción Focalizada de Información supone asimismo tres fases similares a las que plantea DIA. En primera instancia es necesario determinar el conjunto de documentos sobre el cual se realizará la FIE. El conjunto de documentos puede ser heterogéneo. Es decir, puede ocurrir que la información necesaria para encontrar información faltante sobre un concepto se encuentre en más de un tipo de documento. Puede pasar de igual manera que un tipo documento sirva para responder consultas sobre más de un concepto de la ontología y sobre más de una instancia. Puede ocurrir de igual manera que los documentos contengan información adicional que no está relacionada con los dominios de información de los conceptos de la ontología. En tal sentido, la primera labor necesaria para la FIE consiste en definir el conjunto de documentos y cómo acceder a ellos. \\

Una vez definido el conjunto de documentos, es necesario construir extractores de información que permitan encontrar la información faltante en la ontología. Igual que en el esquema general de DIA, el extractor de información puede realizarse utilizando mecanismos de procesamiento de lenguaje natural, de aprendizaje de máquina, etcétera. Lo relevante en esta fase de DIA es que el extractor de información debe construirse tomando en cuenta la información contenida en la ontología, el \emph{contexto de extracción}. Dicho contexto se puede utilizar para facilitar la búsqueda de la información faltante.\\

En tercer lugar es necesario determinar los orígenes de incompletitud. Esto se debe realizar tomando en consideración dos cosas: la consulta realizada por el usuario y la información ya existente en la ontología. La incompletitud puede abarcar más que valores necesarios para responder las consultas: puede incluir información necesaria para calificar la consulta. Tomando en cuenta estos dos elementos se pueden realizar tantas búsquedas de información como sean necesarias. \\

La determinación de los origenes de incompletitud de información es un tema que será abordado posteriormente en profundidad. Sin embargo es importante precisar en este punto que pueden existir más de un tipo de fuentes de incompletitud:\\

\begin{enumerate}
\item Incompletitud por la ausencia de instancias (tuplas) en la ontología. 
\item Incompletitud por el desconocimiento de valores de atributos. 
\item Incompletitud por el desconocimiento de interrelaciones entre instancias.
\end{enumerate}

Para este trabajo se ha definido el alcance de la Extracción Focalizada de Información en la determinación y resolución de incompletitud por desconocimiento de valores de atributos. El motivo de esto es que el descubrimiento de nuevas tuplas es un problema que no puede ser resuelto por Extracción Focalizada de Información, ya que la misma supone la existencia de información en la ontología sobre todas las instancias involucradas en una consulta. Por otro lado, si bien el descubrimiento de interrelaciones entre instancias puede modelarse como el descubrimiento de los valores de las claves foráneas que definen cada interrelación, se ha determinado que esta tarea es más compleja y puede involucrar tareas de extracción más sofisticadas que salen del alcance de este proyecto.\\

Se supone, por lo tanto, que todas las instancias concernientes a los dominios sobre los cuales se hace la búsqueda están contenidas en la ontología con un subconjunto de sus campos con valores conocidos y que las interrelaciones entre los conceptos presentes en la ontología están determinadas.\\

Finalmente, para probar la solución propuesta para la FIE, se trabajó con tres dominios de información relacionados con el funcionamiento interno de la Universidad Simón Bolívar: las designaciones de cargos, los ingresos y ascensos dentro del escalafón de Profesores y la designación de Jurados para Trabajos de Ascenso. Para trabajar con esos 3 dominios se trabajó con las Actas de Consejos Directivos y Actas de Consejos Académicos como conjuntos de documentos. La información concerniente a las designaciones de cargos, los ingresos y ascensos dentro del escalafón de Profesores se puede encontrar en las Actas de los Consejos Directivos. Asimismo, la información concerniente a la designación de Jurados para Trabajos de Ascenso se encuentra en las Actas de Consejos 
Académicos. \\

La tarea de Extracción Focalizada de Información está compuesta por dos grandes labores: la Determinación del Origen de Incompletitud (DOI) y la Búsqueda Focalizada de Información (BFI). La Determinación del Origen de Incompletitud busca, como se ha dicho anteriormente, encontrar qué información está incompleta dentro de la ontología y en la base de datos relacional. Los objetivos de la misma deben ser seleccionar un dato que se quiera obtener en la búsqueda focalizada y construir un contexto que facilite la búsqueda.  La Búsqueda Focalizada de Información toma los resultados de la Determinación del Origen de Incompletitud y busca la información faltante en un conjunto de documentos relacionados al dominio de información de los conceptos involucrados. 

A continuación se describirá en detalle esta solución propuesta para realizar ambos pasos. Ambas tareas son hechas por dos módulos diferentes: el Determinador del Origen de Incompletitud y el Buscador Focalizado de Información. Se hablará de cada uno de ellos y se harán algunos comentarios sobre el contexto de extracción que es el producto intermedio entre ambos módulos. \\

\section{El Determinador del Origen de Incompletitud (DOI)}\label{sect:diseno-DOI}

El Determinador del Origen de Incompletitud es el módulo que se encarga de determinar qué falta en la ontología para poder responder a una consulta hecha por el usuario. Ya se ha explicado anteriormente el mecanismo general para determinar origenes de incompletitud de atributos, en el capítulo \ref{chap:analisisOrigenIncompletitud}. Sin embargo, hay algunas consideraciones generales que son pertinentes mencionar. \\

Como se ha visto, el mecanismo general para determinar los origenes de incompletitud por el desconocimiento de valores de atributos consiste en realizar varias consultas que involucran la clave primaria de los conceptos involucrados. Las consultas tienen como objetivo encontrar valores nulos que indican incompletitud. Ahora bien, para poder hacer esto, es necesario realizar algunas transformaciones de la consulta. En primera instancia se hace necesario transformar las condiciones de la consulta a la Forma Normal Conjuntiva. Esto es importante para poder eliminar restricciones sobre los atributos sobre los cuales se quiere determinar si hay incompletitud. En segunda instancia es necesario también aplanar la consulta resolviendo consultas anidadas y las operaciones presentes en las condiciones. Este paso es necesario para poder construir los contextos de extracción. En tercer lugar es necesario ejecutar cada una de las consultas según lo especificado en el capítulo \ref{chap:analisisOrigenIncompletitud}. \\

Algo que es conveniente destacar es que el acceso a la Base de Datos tuvo que ser simulado. Esto se debe a que el software existente para procesar consultas en ODIL, creado por Mirisola y Apaza \cite{ODILImplementation} fue desarrollado utilizando librerías que ya no están mantenidas y que fueron imposibles de utilizar. Como el alcance de este proyecto de grado no incluye el procesamiento de consultas de ODIL, se simuló el acceso a la ontología - esto es, la interpretación, ejecución y respuesta de las consultas - sin utilizar una base de datos ni consultas escritas en el lenguaje ODIL. \\

\shadowbox{Duda: ¿Es pertinente en este capitulo el ultimo parrafo?}\\

\subsection{El Contexto de Extracción}\label{sect:diseno-extCont}

Como se ha dicho, la tarea del Determinador del Origen de Incompletitud es determinar qué información falta para responder una consulta y preparar un contexto de extracción que facilite la búsqueda focalizada de información. El contenido del contexto de extracción puede incluir valores de atributos que estén relacionados con la información que falta, puede incluir posibles valores de atributos que falten, sinónimos del mismo, heurísticas sobre cómo buscar el valor en el conjunto de documentos y en general cualquier información que pueda ser útil para realizar la búsqueda focalizada. Lo importante en todo caso es que el contexto de extracción sea preparado tomando en cuenta el tipo de extractor que se utilice para la búsqueda focalizada, el tipo de documento, y el dominio de información sobre el cual se realice la extracción.\\

En el caso particular de este proyecto, el contexto de extracción contiene los valores de atributos que están relacionados con el atributo cuyo valor se quiere ubicar. Esto se hizo tomando en cuenta varios aspectos sobre los dominios sobre los cuales se hace la extracción. En primer lugar, los tres dominios de información sobre los cuales se realiza la extracción son relativamente sencillos y poco complejos en estructura. Además de ésto, los datos pueden agruparse en \emph{unidades de información}, fragmentos de texto que contienen toda la información relacionada con todos los conceptos del dominio.\\

Por ejemplo, un posible dominio de información es la designación de un jurado de ascenso dentro de la Universidad Simón Bolívar. La información concerniente a este dominio puede ser encontrada en las actas de los consejos directivos. En este contexto, la unidad de información vendría siendo los párrafos, tablas, enumeraciones, entre otros, que se refieren a la designación de un jurado de ascenso. Dichas unidades son relativamente fáciles de identificar en los documentos y por lo tanto la tarea de la extracción consiste en determinar cuál es la unidad de información relacionada con el atributo que falta para después ubicar en cada unidad el valor faltante. En tal sentido, la identificación de dicha unidad puede realizarse apoyándose en los valores de atributos conocidos. \\

De manera que para este proyecto se concibe un contexto de extracción como un conjunto de valores de campos relacionados con el atributo cuyo valor falta. Es relevante también describir cómo se obtienen esos valores faltantes, ya que existen varias formas de hacerlo. Por ejemplo, si se conoce el valor de la clave primaria o de un conjunto de atributos que permita identificar un conjunto relativamente pequeño de instancias, podrían hacerse consultas adicionales para obtener los valores del resto de los atributos. Esto supone por supuesto realizar consultas adicionales a la base de datos y puede no ser útil cuando el conjunto de instancias que se puede seleccionar con los atributos conocidos es muy grande. \\

Alternativamente, podrían pasarse en lugar de los valores de los atributos que faltan las condiciones especificadas en la consulta hecha por el usuario y que en lugar de ubicar cadenas de caracteres ya conocidas en los documentos se extraigan los valores del documento y se verifiquen las condiciones. La ventaja de este último mecanismo es que no se hace necesario determinar un conjunto de posibles valores y el contexto de extracción es más reducido en tamaño. La desventaja es que se depende de tener un buen extractor que identifique en cada unidad de información el valor de todos los atributos existentes: si el valor está en la unidad pero no se identifica se puede pasar por alto. \\ 

En todo caso, lo importante a destacar es que existe más de una forma posible de construir un contexto de extracción que se base en valores de atributos conocidos. Para este proyecto, el contexto fue construido elaborando una lista de valores posibles a partir de las condiciones de la consulta hecha por el usuario. En los casos en los que se tienen restricciones de igualdad a uno o más valores (condiciones = o IN) es fácil determinar el posible valor del campo. En los casos en los que se tienen restricciones que operan sobre un rango, el problema es relativamente más complejo ya que es necesario determinar un \emph{conjunto} de posibles valores del campo. Para ello se decidió especificar como parte de la configuración del sistema conjuntos de valores que pueden tener en general cada uno de los atributos y se realiza una intersección con las condiciones de la consulta para determinar, para cada consulta (y consecuentemente cada contexto de extracción), los posibles valores. Dichos conjuntos pueden ser definidos explícitamente (listando los valores posibles) o implícitamente (definiendo un intervalo de valores posibles y alguna forma de generar todos los valores posibles por medio, por ejmplo, de un incremento). \\

La principal desventaja de este mecanismo es que su funcionamiento depende de que se puedan generar correctamente todos los posibles valores de cada uno de los atributos. Si falta alguno de los valores posibles, es factible que no se identifique la unidad de información apropiada. La ventaja y en esencia el motivo por el cual se prefirió este mecanismo sobre los ya listados anteriormente, es que no se depende del extractor focalizado ni de la información que se conozca; siempre se generan todos los posibles valores si la configuración del sistema es apropiada. \\

Por último, algo que debe tomarse en cuenta es que a menudo las restricciones dadas por las condiciones en una consulta pueden incluir ORs en los que se especifican condiciones relativamente complejas. El contexto de extracción debe ser construido de forma que permita reflejar todos los posibles estados que satisfagan las condiciones. Dicho espacio puede ser visto como el producto cartesiano de los conjuntos determinados por los átomos presentes en las cadenas de OR de la Forma Normal Conjuntiva. Esto es, entendiendo como \emph{átomo} una condición que espeficique una restricción puntual sobre uno o más atributos (igualdad, mayor o menor, etcétera), cada \emph{elemento} de la condición en la NCF puede ser una cadena de ORs que operen sobre varios átomos o por el contrario un átomo individual. Un contexto que consista en los posibles valores de los atributos debería contemplar todo el espacio generado. Por ejemplo, si la condición es de esta forma: \\

$$(C_{1,1} \vee C_{1,2} ...  \vee C_{1,N}) \wedge (C_{2,1} \vee ...C_{2,N}) \wedge (C_{M,1} \vee ... C_{M,N}) $$

Donde $C_{m,n}$ se refiere al átomo número n de N del elemento número m de M en la CNF. \\


Los posibles estados que pueden generarse son de la forma $$(C_{1,1}, C_{2,1},...,C_{M,1}), (C_{1,2}, C_{2,1},...,C_{M,1}),...(C_{1,N},C_{2,N},C_{M,N})$$ 

Cada estado representa un posible conjunto de valores que satisfacen las condiciones especificadas en la consulta. En tal sentido, cada uno de estos estados debería ser evaluado por separado al determinar cuál es la unidad de información correcta. \\

\section{El Buscador Focalizado de Información (BFI)}\label{sect:diseno-BFI}

El Buscador Focalizado de Información es el encargado de encontrar los valores de los campos cuyos valores son desconocidos para una consulta dada. Dichos valores son buscados en un conjunto de documentos. En el caso de este proyecto de grado, se requiere que los documentos estén presentes en el sistema de archivos donde se ejecute el sistema utilizando información de contexto proporcionada por el Determinador del Origen de Incompletitud (DOI). Sin embargo, como se ha dicho, la arquitectura DIA no presenta restricciones sobre la naturaleza de los documentos y podrían ser accedidos remotamente e inclusive utilizarse la World Wide Web.\\

En el caso del presente proyecto de grado, para llevar a cabo esta tarea, el BFI tiene dos componentes: un preprocesador de texto y un extractor focalizado de información. \\

\begin{figure}[h]
  \centering
  \includegraphics[width=1\textwidth]%
    {BFIdiagram}
  \caption[Diagrama del Buscador Focalizado de Información]
   {Diagrama del Buscador Focalizado de Información}
\end{figure}

\begin{comment}
\begin{figure}[hb]
  \centering
  \includegraphics[width=1\textwidth]%
    {DOIdiagram}
  \caption[Diagrama del Determinador del Origen de Incompletitud]
   {Diagrama del Determinador del Origen de Incompletitud}
\end{figure}
\end{comment}

El Preprocesador de Texto tiene como objetivo preparar el conjunto de documentos sobre el cual se hará la Búsqueda Focalizada de Información y dejarlo listo para la realización de la extracción. Las tareas para ello incluyen leer el documento en su formato original y extraer el fragmento o el conjunto de fragmentos del documento que están relacionados con el dominio sobre el cual se hará la Búsqueda Focalizada de Información. \\

En este proyecto de grado, los dominios elegidos se caracterizan por tener un conjunto de documentos bastante homogéneos y el preprocesamiento consiste en esencia en elegir los fragmentos de documentos que están relacionados con el dominio informativo sobre el cual se hará la extracción focalizada. Sin embargo, en general el preprocesamiento de documentos podría incluir tareas más amplias: puede darse que el conjunto de documentos sea heterógeneo y que se requiera una preparación adicional; puede darse analógamente que un mismo documento tenga información de diferentes dominios que se quieran trabajar. Puede ocurrir también que los documentos esten en más de un idioma. En todo caso lo relevante en todo esto es que el preprocesamiento es una labor que tiene como objetivo preparar a los documentos para realizar la extracción propiamente dicha y que puede incluir muchas subtareas.   \\

De igual forma, es importante destacar que el preprocesamiento de texto es concebido como una tarea que se realiza \emph{offline}. Es decir, cada conjunto de documentos puede ser preprocesado previamente de forma para que las consultas sean respondidas lo más rápidamente posible. \\

Por su parte, el Extractor Focalizado de Información (EFI) tiene como objetivo extraer el valor del campo faltante utilizando como materia prima el conjunto de documentos preprocesados y un contexto de extracción. El contexto de extracción, como se ha dicho anteriormente, consiste en toda la información que el DOI puede recopilar sobre la consulta que se está realizando que puede ser de útil para hacer la extracción focalizada de información. \\

La tarea de extracción es probablemente la que tiene una mayor complejidad asociada y depende muchísimo del tipo de documento que se trate y de que tan estructurado es. Cómo se ha dicho, en la medida en la que los textos sean mas estructurados - esto es, en la medida en la que el estilo sea regular y homogéneo - se hace más fácil la construcción del extractor. Sin embargo, esto supone un reto abierto en el mundo de la computación y los avances más recientes en el área de IE incluyen extractores basados en modelos estocásticos y Machine Learning. \\

Anteriormente se han diseñado extractores para DIA con resultados bastante buenos. Ruiz (\emph{año}) \cite{ruiz-HMM} construyó un extractor basado en Hidden Markov Models (Modelos Ocultos de Markov) con resultados muy buenos. En el caso particular de este proyecto, no obstante, el objetivo principal no es la construcción de un extractor focalizado sofisticado. El extractor focalizado concebido trabaja con expresiones regulares, que buscan explotar al máximo la estructura de los documentos. En esencia, lo que se tiene para ello son una serie de reglas de extracción que especifican delimitadores anteriores y posteriores a la unidad de texto que se quiere extraer. Dicha tecnología se utiliza en este proyecto para el preprocesador de texto y para el extractor focalizado.\\

El motivo por el cual se eligió el uso de expresiones regulares es que los dominios de información tienen documentos semiestructurados,  que en general tienen un estilo de diagramación y redacción que permanece bastante similar. Esto es, es posible identificar frases y palabras que pueden servir de delimitadores para encontrar los datos requeridos. Para ello, es necesario que un usuario experto pueda identificarlas y compilar una lista de expresiones regulares. Esta labor no puede ser automatizada y debe ser realizada manualmente para cada dominio de información y atributo. En todo caso, es importante destacar que cualquier extractor focalizado requiere intervención humana para poder configurar la manera como se extrae la información, bien sea porque involucra marcar documentos (Document Tagging) o porque requiera aprendizaje de máquina en el cual se requiere una configuración mínima por parte del usuario.\\

Es importante aclarar que la solución propuesta no depende del tipo de extractor que se construya. En general DIA y la FIE definen pasos necesarios para interrogar documentos; la construcción del extractor es una tarea que depende fundamentalmente del dominio sobre el cual se trabaje. \\

A manera de conclusión, es relevante decir que el DOI trabaja directamente con el Extractor Focalizado de Información para encontrar los valores faltantes. Esto es, una vez que se determinan los origenes de incompletitud, el EFI recibe solicitudes de búsqueda para cada uno de los campos con valores faltantes. Esas solicitudes permiten descubrir y completar la ontología y dar respuesta a las consultas que tiene el usuario. El preprocesador se ejecuta una única vez por conjunto de documentos. \\

